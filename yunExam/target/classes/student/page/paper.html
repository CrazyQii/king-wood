<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>答题试卷</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <link rel="stylesheet" href="/lib/font-awesome-4.7.0/css/font-awesome.min.css" media="all">
    <link rel="icon" href="/images/favicon.ico">
    <link rel="stylesheet" href="/layui/css/layui.css">
</head>
<style>
    body {
        background-color: #EEEEEE;
    }
    .layui-layout-body {
        overflow-y: scroll;
    }
    .layui-header {
        padding-top: 20px;
        height: 80px;
        background-color: #DDE8F4;
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        box-sizing: border-box;
    }
    .number {
        display: inline-block;
        width: 30px;
        height: 30px;
        margin: 0 10px;
        -webkit-border-radius: 50%;
        -moz-border-radius: 50%;
        border-radius: 50%;
        background-color: #838af2;
        line-height: 30px;
        text-align: center;
        font-weight: 700;
    }

    .layui-form-radio {
        margin: 0 10px 0 0;
    }
</style>
<body class="layui-layout-body">
    <div class="layui-header layui-row">
        <div class="layui-col-md1 layui-col-lg-offset1">
            <h1>考试名称</h1>
        </div>
        <div class="layui-col-md7 layui-col-lg-offset1">
            <div class="layui-row">
                <h3>总分:</h3>
                <div class="layui-col-md8">
                    <h3>考试时间:</h3>
                </div>
                <div class="layui-col-md4">
                    <div id="countDown"></div>
                </div>
            </div>
        </div>
    </div>

    <!--  模板引擎视图  -->
    <div id="view" class="layui-container"></div>
    <div class="layui-container layui-row" style="margin: 30px auto;">
        <button type="button" class="layui-btn layui-btn-lg layui-col-md3 layui-col-lg-offset3 ">
            提交试卷
        </button>
        <button type="button" class="layui-btn layui-btn-lg layui-btn-normal layui-col-md3">
            保存试卷
        </button>
    </div>

    <!--  编写模板  -->
    <script type="text/html" id="topicTpl">
        {{#  layui.each(d.list, function(index, item) {  }}
        <div class="layui-card" style="margin-top: 15px;">
            <div class="layui-card-header layui-row">
                <div class="layui-col-md12">
                    <span class="number">{{ index + 1 }}</span>
                    {{ item.title }}
                </div>
            </div>
            <div class="layui-card-body" style="padding-left: 3%;">
                <ul class="layui-input-inline">
                    <li>
                        <label>
                            <input type="radio" name="topic{{ item.id }}" class="layui-form-radio">
                        A. {{ item.A }}</label>
                    </li>
                    <li>
                        <label>
                            <input type="radio" name="topic{{ item.id }}" class="layui-form-radio">
                        B. {{ item.B }}</label>
                    </li>
                    <li>

                        <label>
                            <input type="radio" name="topic{{ item.id }}" class="layui-form-radio">
                        C. {{ item.C }}</label>
                    </li>
                    <li>
                        <label>
                            <input type="radio" name="topic{{ item.id }}" class="layui-form-radio">
                        D. {{ item.D }}</label>
                    </li>
                </ul>
            </div>
        </div>
        {{#  }); }}

        {{#  if (d.list.length === 0) {  }}
            <div class="layui-col-md12" style="margin: 20px auto; text-align: center;"><h1>空白试卷</h1></div>
        {{#  }; }}

    </script>


<script src="/layui/layui.js"></script>
<script>
    layui.use(['element', 'laytpl', 'util', 'laydate', 'jquery', 'layer'], function () {
        var element = layui.element
            ,laytpl = layui.laytpl
            ,laydate = layui.laydate
            ,$ = layui.jquery
            ,layer = layui.layer
            ,util = layui.util;

        //倒计时
        var thisTimer, setCountdown = function(endTime, serverTime){
            // var endTime = new Date(y, M||0, d||1, H||0, m||0, s||0) //结束时间
            //    ,serverTime = new Date(); //假设为当前服务器时间，这里采用的是本地时间，实际使用一般是取服务端的

            clearTimeout(thisTimer);
            util.countdown(endTime, serverTime, function(date, serverTime, timer){
                var str = '距离考试结束还有: ' + date[1] + '时' + date[2] + '分' + date[3] + '秒';
                lay('#countDown').html(str);
                thisTimer = timer;
            });
        };
        var endTime = new Date(new Date().getTime() + 2*60*60*1000);
        var serverTime = new Date();
        setCountdown(endTime, serverTime);

        // 渲染模板
        $.ajax({
            url: '../api/topic.json',
            method: 'get',
            success: function (data) {
                console.log(data)
                // 模板渲染
                var getTpl = topicTpl.innerHTML
                    , view = document.getElementById('view');
                laytpl(getTpl).render(data, function (html) {
                    view.innerHTML = html;
                })
            },
            error: function (error) {
                console.log(error)
                layer.msg('数据接口有误!',{icon: 5, time: 2000})
            }
        })
    })
</script>
</body>
</html>