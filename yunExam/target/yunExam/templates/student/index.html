<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>学生在线考试平台</title>
    <link rel="stylesheet" href="../../layui/css/layui.css">
</head>
<style>
    .layui-logo>a>img {
        display: inline-block;
        height: 30px;
        vertical-align: middle;
    }
    .layui-logo>a>h1 {
        display: inline-block;
        vertical-align: middle;
        font-size: 20px;
        color: #dadde2;
    }
</style>
<body class="layui-layout-body">
    <div class="layui-layout-admin">

        <div class="layui-header">
            <div class="layui-logo">
                <a href="">
                    <img src="../../images/logo.png" alt="">
                    <h1>在线考试</h1>
                </a>
            </div>
            <ul class="layui-nav layui-layout-left" lay-filter="page">
                <li class="layui-nav-item"><a data-a="nav" href="#/page/user-setting.html">考试</a></li>
                <li class="layui-nav-item"><a data-a="nav" href="#/page/user-password.html">成绩查询</a></li>
                <li class="layui-nav-item"><a data-a="nav" href="">试题解析</a></li>
            </ul>
            <ul class="layui-nav layui-layout-right">
                <li class="layui-nav-item">
                    <a href=""><img src="//t.cn/RCzsdCq" class="layui-nav-img">我</a>
                    <dl class="layui-nav-child">
                        <dd><a href="javascript:;">基本资料</a></dd>
                        <dd><a href="#/page/user-password.html">修改密码</a></dd>
                        <dd><a href="javascript:;">退出系统</a></dd>
                    </dl>
                </li>
            </ul>
        </div>
        <div class="layui-container">
            123
        </div>
    </div>
<script src="../../layui/layui.js"></script>
<script>

    layui.use(['element', 'jquery'], function () {
        var element = layui.element
            ,$ = layui.jquery;

        // 导航栏事件监听,实现单页应用
        element.on('nav(page)', function(elem){
            var href = initHash(elem.context.href); // 解析#获取真实路径
            initContainer(href);
        });

        /**
         * 初始化浏览器
         */
        $(document).ready(function(){
            var locationHref = window.location.href; // 获取url中#的路径
            initNav(locationHref); // 初始化导航栏样式
            var href = initHash(locationHref); // 真实路径
            if (href != null) { // 路径存在
                initContainer(href);
            }
        });

        /**
         * 解析url #/page/user-setting.html
         * @param hash 哈希地址
         * @returns {string|null} 真实地址
         */
        var initHash = function(hash) {
            var urlArr = hash.split("/#"); // 去除url中的#
            if (urlArr.length >= 2) { // 获取真实路径
                return urlArr[0] + urlArr[1];
            } else { // 跳转其他
                return null;
            }
        };

        /**
         * 初始化页面
         * @param href 链接地址
         */
        var initContainer = function (href) {
            var container = '.layui-container';
            $(container).html('');
            $.ajax({
                url: href,
                type: 'get',
                dataType: 'html',
                success: function (data) {
                    $(container).html(data);
                },
                error: function (error) {
                    console.log(error);
                }
            })
        };

        /**
         * 初始化页面导航栏
         * @param href 链接地址
         */
        var initNav = function (href) {
            href = '#' +  href.split('/#').pop();
            $("[data-a=nav]").each(function () {
                $(this).removeClass("layui-this"); // 清除默认样式
                if(href == $(this).attr("href")) {
                    $(this).parent().addClass("layui-this");
                }
            })
        }
    });

</script>
</body>
</html>
